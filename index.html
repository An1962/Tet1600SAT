<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAT Thủ Khoa Đức An - Khai Bút Đầu Xuân 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Thêm thư viện Confetti cho hiệu ứng chúc mừng -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400&family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --royal-blue: #004488;
            --gold: #FFD700;
            --gold-dark: #d4b100;
            --slate-50: #f8fafc;
        }

        body {
            font-family: 'Crimson Text', serif;
            background-color: var(--slate-50);
            color: #1e293b;
            scroll-behavior: smooth;
        }

        .font-brand {
            font-family: 'Montserrat', sans-serif;
        }

        .btn-3d {
            transition: all 0.1s;
            box-shadow: 0px 4px 0px 0px var(--gold-dark);
            transform: translateY(0);
        }

        .btn-3d:active {
            transform: translateY(4px);
            box-shadow: 0px 0px 0px 0px var(--gold-dark);
        }

        .hero-bg {
            background: linear-gradient(135deg, #003366 0%, #004488 50%, #002244 100%);
        }

        @keyframes shake {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(5deg); }
            50% { transform: rotate(0eg); }
            75% { transform: rotate(-5deg); }
            100% { transform: rotate(0deg); }
        }

        .shake-element {
            animation: shake 2s infinite;
        }
        
        @keyframes pulse-soft {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        .animate-pulse-soft {
            animation: pulse-soft 3s infinite ease-in-out;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #004488; 
            border-radius: 4px;
        }

        .card-shadow {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .correct-answer {
            background-color: #dcfce7 !important;
            border-color: #22c55e !important;
            color: #14532d !important;
            font-weight: bold;
        }
        
        .wrong-answer {
            background-color: #fee2e2 !important;
            border-color: #ef4444 !important;
            color: #7f1d1d !important;
            opacity: 0.7;
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }

        .passage-text {
            font-family: 'Crimson Text', serif;
            line-height: 1.5;
            font-size: 1.05rem;
        }

        /* Flashcard Animation */
        @keyframes flipInX {
            0% { transform: rotateX(-90deg); opacity: 0; }
            100% { transform: rotateX(0deg); opacity: 1; }
        }
        .animate-flip-in {
            animation: flipInX 0.4s ease-out forwards;
        }

        /* Custom scroll for quotes if it gets too long */
        .quotes-scroll {
            max-height: 1000px;
            overflow-y: auto;
            padding-right: 8px;
        }

        .fade-transition {
            transition: opacity 0.25s ease-in-out, transform 0.25s ease-out;
        }
        .fade-out {
            opacity: 0;
            transform: translateY(10px);
        }
        .fade-in {
            opacity: 1;
            transform: translateY(0);
        }
        
        #vocab-container {
            touch-action: pan-y; /* Đảm bảo vẫn cuộn dọc được bình thường */
        }
    </style>
</head>
<body class="min-h-screen flex flex-col relative">

    <!-- Canvas tĩnh để Confetti hoạt động ổn định (tránh lỗi blob/Worker) -->
    <canvas id="confetti-canvas" class="fixed inset-0 w-full h-full pointer-events-none z-[9999]"></canvas>

    <!-- POP-UP NĂM MỚI -->
    <div id="ny-modal" class="fixed inset-0 z-[100] bg-[#001122]/80 backdrop-blur-md flex items-center justify-center p-4 transition-opacity duration-500 opacity-0 pointer-events-none">
        <div class="bg-white rounded-3xl w-full max-w-2xl relative overflow-hidden shadow-2xl transform scale-95 transition-transform duration-500 ease-out" id="ny-modal-content">
            
            <!-- Decorative Header (Giao diện Tối giản, Sang trọng) -->
            <div class="bg-[#002244] p-8 text-center relative overflow-hidden border-b-[3px] border-[#FFD700]">
                <!-- Soft golden glows for premium feel -->
                <div class="absolute -top-10 -left-10 w-40 h-40 bg-[#FFD700] rounded-full mix-blend-screen filter blur-[60px] opacity-20 pointer-events-none"></div>
                <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-[#FFD700] rounded-full mix-blend-screen filter blur-[60px] opacity-20 pointer-events-none"></div>
                
                <button onclick="closeModal()" class="absolute top-4 right-4 text-white/50 hover:text-white transition-colors w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/10 z-20">
                    <i class="fas fa-times text-xl"></i>
                </button>
                
                <h2 class="font-brand font-extrabold text-3xl md:text-4xl text-transparent bg-clip-text bg-gradient-to-r from-[#FFD700] to-[#fff3b0] uppercase tracking-wider relative z-10 drop-shadow-sm">
                     Chúc Mừng Năm Mới
                </h2>
                <p class="text-[#FFD700]/80 font-brand font-semibold mt-2 text-lg relative z-10 tracking-widest uppercase">Xuân Bính Ngọ 2026</p>
            </div>
            
            <!-- Body -->
            <div class="p-6 md:p-8 flex flex-col md:flex-row gap-8 items-center bg-white relative">
                <!-- Book Cover -->
                <div class="shrink-0 relative group">
                    <img src="https://d21acfi38wn3iy.cloudfront.net/resource/documents/9d2dd8b7-2de4-4dea-9c36-f8a2abc3dece/1770862031966-ban-sao-cua-tac-gia-tu-duy-sat-1600-2-png.png" 
                         alt="Unlock SAT 1600" class="w-32 md:w-40 rounded-xl shadow-2xl object-cover transform -rotate-2 group-hover:rotate-0 transition-all duration-300 relative z-10 border border-slate-100">
                    <!-- Glow effect đằng sau ảnh -->
                    <div class="absolute inset-0 bg-[#004488] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"></div>
                </div>
                
                <!-- Text Content -->
                <div class="flex-1 text-center md:text-left flex flex-col h-full justify-center">
                    <p class="text-slate-700 text-[16px] mb-6 leading-relaxed font-brand font-medium">
                        Thầy <b class="text-[#004488] font-bold">Đức An</b> cùng đội ngũ chuyên gia <b class="bg-[#FFD700] text-[#004488] px-2 py-0.5 rounded shadow-sm inline-block transform -translate-y-0.5">1600 SAT</b> chân thành chúc quý phụ huynh và các em học sinh một năm mới Sức khỏe, Hạnh phúc và đạt được những cột mốc điểm số mong ước.
                    </p>
                    
                    <div class="mb-6">
                        <p class="text-[11px] uppercase font-bold text-slate-400 mb-3 tracking-wider"><i class="fas fa-award mr-1 text-[#FFD700]"></i> Lời chúc từ đội ngũ:</p>
                        <div class="flex flex-wrap gap-2 justify-center md:justify-start">
                            <span class="bg-blue-50 border border-blue-100 text-[#004488] text-[11px] font-bold px-3 py-1.5 rounded-md hover:bg-blue-100 transition-colors">Phạm Đỗ Thái An</span>
                            <span class="bg-blue-50 border border-blue-100 text-[#004488] text-[11px] font-bold px-3 py-1.5 rounded-md hover:bg-blue-100 transition-colors">Nguyễn Trọng Huy Khánh</span>
                            <span class="bg-blue-50 border border-blue-100 text-[#004488] text-[11px] font-bold px-3 py-1.5 rounded-md hover:bg-blue-100 transition-colors">Nguyễn Thị Diệu Anh</span>
                            <span class="bg-blue-50 border border-blue-100 text-[#004488] text-[11px] font-bold px-3 py-1.5 rounded-md hover:bg-blue-100 transition-colors">Lê Khánh Nam</span>
                            <span class="bg-blue-50 border border-blue-100 text-[#004488] text-[11px] font-bold px-3 py-1.5 rounded-md hover:bg-blue-100 transition-colors">Lê Bảo Trân</span>
                            <span class="bg-blue-50 border border-blue-100 text-[#004488] text-[11px] font-bold px-3 py-1.5 rounded-md hover:bg-blue-100 transition-colors">Andrew Huang</span>
                            <span class="bg-blue-50 border border-blue-100 text-[#004488] text-[11px] font-bold px-3 py-1.5 rounded-md hover:bg-blue-100 transition-colors">Hoàng Đăng Khánh</span>
                            <span class="bg-blue-50 border border-blue-100 text-[#004488] text-[11px] font-bold px-3 py-1.5 rounded-md hover:bg-blue-100 transition-colors">Nguyễn Tuấn Anh</span>
                        </div>
                    </div>
                    
                    <button onclick="closeModal()" class="w-full bg-[#004488] text-white font-bold py-3 px-6 rounded-xl font-brand shadow-lg hover:shadow-[#004488]/30 hover:-translate-y-0.5 active:scale-95 transition-all flex justify-center items-center gap-2">
                        <i class="fas fa-envelope-open-text text-[#FFD700]"></i> Nhận "vía" 1600 & Khai bút
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Sticky Header -->
    <header class="sticky top-0 z-40 bg-[#004488] border-b-4 border-[#FFD700] shadow-lg">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <img src="https://d21acfi38wn3iy.cloudfront.net/resource/documents/9d2dd8b7-2de4-4dea-9c36-f8a2abc3dece/1761724790727-anh-group-fb-png.png" 
                     alt="Logo" class="h-11 w-11 rounded-full border-2 border-[#FFD700] bg-white object-contain p-0.5">
                <div class="flex flex-col">
                    <div class="flex items-end gap-2">
                        <h1 class="font-brand font-bold text-white text-lg leading-none uppercase tracking-wider">SAT Thủ Khoa</h1>
                        <span class="text-[#FFD700] text-[11px] font-bold uppercase tracking-widest mb-0.5">Đức An</span>
                    </div>
                    <!-- Website link -->
                    <a href="https://satfelis.izteach.vn" target="_blank" class="text-blue-200 hover:text-[#FFD700] text-[11px] mt-1 flex items-center gap-1 transition-colors w-fit font-brand">
                        <i class="fas fa-globe"></i> satfelis.izteach.vn
                    </a>
                </div>
            </div>
            <a href="#register" class="hidden md:block bg-[#FFD700] text-[#004488] font-bold py-2 px-6 rounded-full btn-3d font-brand uppercase text-sm">
                Đăng ký học
            </a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-6 md:py-8 grid grid-cols-1 lg:grid-cols-12 gap-8">
        
        <!-- LEFT COLUMN: Hall of Fame & Quotes -->
        <aside class="lg:col-span-4 space-y-6 order-2 lg:order-1">
            <!-- Hero Card -->
            <div class="hero-bg rounded-3xl p-6 text-white card-shadow relative overflow-hidden text-center border-b-4 border-[#FFD700]">
                <div class="absolute -top-4 -right-4 p-4 opacity-10 transform rotate-12">
                    <i class="fas fa-dragon text-9xl text-[#FFD700]"></i>
                </div>
                <h2 class="font-brand font-bold text-2xl mb-2 text-[#FFD700] uppercase relative z-10">Khai Bút Đầu Xuân</h2>
                <p class="text-base italic mb-5 text-blue-100 relative z-10">"Nhận vía" 1600 để năm 2026 bứt phá!</p>
                <div class="inline-block glass-effect rounded-2xl px-6 py-3 border border-[#FFD700]/50 relative z-10">
                    <span class="block text-xs uppercase tracking-widest text-slate-200">Mục tiêu</span>
                    <span class="block text-5xl font-extrabold text-[#FFD700] font-brand mt-1 drop-shadow-md">1600</span>
                </div>
            </div>

            <!-- Quotes Section -->
            <div class="bg-slate-50 rounded-3xl p-1">
                <div class="mb-4 px-2 pt-2">
                    <h3 class="font-brand font-bold text-[#004488] uppercase text-lg border-l-4 border-[#FFD700] pl-3 mb-3">
                        Tư Duy SAT 1600
                    </h3>
                    <!-- Book Cover Banner -->
                    <div class="bg-white rounded-2xl p-3 border border-slate-200 card-shadow flex items-center gap-4 hover:border-blue-300 transition-colors">
                        <img src="https://d21acfi38wn3iy.cloudfront.net/resource/documents/9d2dd8b7-2de4-4dea-9c36-f8a2abc3dece/1770862031966-ban-sao-cua-tac-gia-tu-duy-sat-1600-2-png.png" 
                             alt="Sách Unlock SAT 1600" class="w-16 h-auto rounded-lg shadow-sm object-cover border border-slate-100">
                        <div>
                            <p class="text-[10px] font-bold uppercase tracking-wider text-[#FFD700] bg-[#004488] inline-block px-2 py-0.5 rounded-sm mb-1">Ấn phẩm mới</p>
                            <p class="text-sm font-bold text-slate-800 leading-tight">Unlock SAT 1600</p>
                            <p class="text-[11px] text-slate-500 italic mt-0.5">Trích dẫn lời khuyên chuyên gia</p>
                        </div>
                    </div>
                </div>

                <div class="space-y-4 quotes-scroll px-2 pb-2">
                    <!-- Quote 1 -->
                    <div class="bg-white rounded-2xl p-4 card-shadow border border-slate-100 hover:shadow-lg transition-shadow">
                        <div class="flex items-start gap-3">
                            <div class="bg-blue-50/80 rounded-full p-2 h-10 w-10 flex items-center justify-center flex-shrink-0 text-[#004488]">
                                <i class="fas fa-clipboard-check"></i>
                            </div>
                            <div>
                                <p class="text-[15px] text-slate-700 italic mb-3 leading-relaxed">"Điều quan trọng là chất lượng từng buổi luyện tập, chứ không phải số lượng. Duy trì chữa chi tiết, ghi error log và phân loại lỗi."</p>
                                <div class="flex flex-wrap items-center gap-2">
                                    <span class="font-bold text-[#004488] font-brand text-sm uppercase">Phạm Đỗ Thái An</span>
                                    <span class="bg-[#FFD700] text-[#004488] text-[10px] font-bold px-2 py-0.5 rounded-full">1600 SAT</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quote 2 -->
                    <div class="bg-white rounded-2xl p-4 card-shadow border border-slate-100 hover:shadow-lg transition-shadow">
                        <div class="flex items-start gap-3">
                            <div class="bg-blue-50/80 rounded-full p-2 h-10 w-10 flex items-center justify-center flex-shrink-0 text-[#004488]">
                                <i class="fas fa-balance-scale"></i>
                            </div>
                            <div>
                                <p class="text-[15px] text-slate-700 italic mb-3 leading-relaxed">"SAT gần như không bao giờ chọn khẳng định cực đoan. Đáp án đúng thường là những câu ôn hòa, vừa đủ khớp với sắc thái văn bản."</p>
                                <div class="flex flex-wrap items-center gap-2">
                                    <span class="font-bold text-[#004488] font-brand text-sm uppercase">Nguyễn Trọng Huy Khánh</span>
                                    <span class="bg-[#FFD700] text-[#004488] text-[10px] font-bold px-2 py-0.5 rounded-full">1600 SAT</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quote 3 -->
                    <div class="bg-white rounded-2xl p-4 card-shadow border border-slate-100 hover:shadow-lg transition-shadow">
                        <div class="flex items-start gap-3">
                            <div class="bg-blue-50/80 rounded-full p-2 h-10 w-10 flex items-center justify-center flex-shrink-0 text-[#004488]">
                                <i class="fas fa-map-marked-alt"></i>
                            </div>
                            <div>
                                <p class="text-[15px] text-slate-700 italic mb-3 leading-relaxed">"Hãy coi mỗi motif như một 'bản đồ bẫy đặc trưng'. Nhìn ra motif sớm, bạn sẽ đoán được dạng bẫy có thể xuất hiện."</p>
                                <div class="flex flex-wrap items-center gap-2">
                                    <span class="font-bold text-[#004488] font-brand text-sm uppercase">Nguyễn Thị Diệu Anh</span>
                                    <span class="bg-[#FFD700] text-[#004488] text-[10px] font-bold px-2 py-0.5 rounded-full">1600 SAT</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quote 4 -->
                    <div class="bg-white rounded-2xl p-4 card-shadow border border-slate-100 hover:shadow-lg transition-shadow">
                        <div class="flex items-start gap-3">
                            <div class="bg-blue-50/80 rounded-full p-2 h-10 w-10 flex items-center justify-center flex-shrink-0 text-[#004488]">
                                <i class="fas fa-project-diagram"></i>
                            </div>
                            <div>
                                <p class="text-[15px] text-slate-700 italic mb-3 leading-relaxed">"Với dạng correlation, hãy tận dụng tờ nháp để ghi lại các biến và mối tương quan giữa chúng. Kết nối chúng lại để tìm đáp án."</p>
                                <div class="flex flex-wrap items-center gap-2">
                                    <span class="font-bold text-[#004488] font-brand text-sm uppercase">Lê Khánh Nam</span>
                                    <span class="bg-[#FFD700] text-[#004488] text-[10px] font-bold px-2 py-0.5 rounded-full">1600 SAT</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quote 5 -->
                    <div class="bg-white rounded-2xl p-4 card-shadow border border-slate-100 hover:shadow-lg transition-shadow">
                        <div class="flex items-start gap-3">
                            <div class="bg-blue-50/80 rounded-full p-2 h-10 w-10 flex items-center justify-center flex-shrink-0 text-[#004488]">
                                <i class="fas fa-flask"></i>
                            </div>
                            <div>
                                <p class="text-[15px] text-slate-700 italic mb-3 leading-relaxed">"SAT không đòi hỏi trở thành nhà khoa học, chỉ cần nắm rõ logic. Đáp án đúng luôn nằm trong số liệu, không phải cảm giác."</p>
                                <div class="flex flex-wrap items-center gap-2">
                                    <span class="font-bold text-[#004488] font-brand text-sm uppercase">Lê Bảo Trân</span>
                                    <span class="bg-[#FFD700] text-[#004488] text-[10px] font-bold px-2 py-0.5 rounded-full">1600 SAT</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quote 6 -->
                    <div class="bg-white rounded-2xl p-4 card-shadow border border-slate-100 hover:shadow-lg transition-shadow">
                        <div class="flex items-start gap-3">
                            <div class="bg-blue-50/80 rounded-full p-2 h-10 w-10 flex items-center justify-center flex-shrink-0 text-[#004488]">
                                <i class="fas fa-bullseye"></i>
                            </div>
                            <div>
                                <p class="text-[15px] text-slate-700 italic mb-3 leading-relaxed">"Decide what the answer should do and you just use your choices only to match the prediction. Don't hunt randomly."</p>
                                <div class="flex flex-wrap items-center gap-2">
                                    <span class="font-bold text-[#004488] font-brand text-sm uppercase">Andrew Huang</span>
                                    <span class="bg-[#FFD700] text-[#004488] text-[10px] font-bold px-2 py-0.5 rounded-full">1600 SAT</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quote 7 -->
                    <div class="bg-white rounded-2xl p-4 card-shadow border border-slate-100 hover:shadow-lg transition-shadow">
                        <div class="flex items-start gap-3">
                            <div class="bg-blue-50/80 rounded-full p-2 h-10 w-10 flex items-center justify-center flex-shrink-0 text-[#004488]">
                                <i class="fas fa-shapes"></i>
                            </div>
                            <div>
                                <p class="text-[15px] text-slate-700 italic mb-3 leading-relaxed">"Mục tiêu tối thượng không chỉ là hiểu văn bản, mà là nhận diện chính xác các mô hình và công thức được cài cắm."</p>
                                <div class="flex flex-wrap items-center gap-2">
                                    <span class="font-bold text-[#004488] font-brand text-sm uppercase">Hoàng Đăng Khánh</span>
                                    <span class="bg-[#FFD700] text-[#004488] text-[10px] font-bold px-2 py-0.5 rounded-full">1600 SAT</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quote 8 -->
                    <div class="bg-white rounded-2xl p-4 card-shadow border border-slate-100 hover:shadow-lg transition-shadow">
                        <div class="flex items-start gap-3">
                            <div class="bg-blue-50/80 rounded-full p-2 h-10 w-10 flex items-center justify-center flex-shrink-0 text-[#004488]">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div>
                                <p class="text-[15px] text-slate-700 italic mb-3 leading-relaxed">"Học vẹt là chưa đủ. Thay vì bị cuốn vào nội dung bề mặt, hãy rèn luyện để nhìn thấu mạch logic ngầm và lập luận cốt lõi."</p>
                                <div class="flex flex-wrap items-center gap-2">
                                    <span class="font-bold text-[#004488] font-brand text-sm uppercase">Nguyễn Tuấn Anh</span>
                                    <span class="bg-[#FFD700] text-[#004488] text-[10px] font-bold px-2 py-0.5 rounded-full">1600 SAT</span>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </aside>

        <!-- RIGHT COLUMN: Interactive Flashcards -->
        <section class="lg:col-span-8 order-1 lg:order-2">
            <!-- Header của Flashcard -->
            <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 gap-3">
                <div>
                    <h3 class="font-brand font-bold text-[#004488] uppercase text-2xl border-l-4 border-[#FFD700] pl-3 leading-none">
                        Bộ Flashcard Khai Bút
                    </h3>
                    <p class="text-sm text-slate-500 italic mt-1 pl-4"><i class="fas fa-book-open text-[#004488] mr-1"></i> Format SAT Reading (14/02 - 23/02)</p>
                </div>
                
                <!-- Navigation Controls -->
                <div class="flex items-center justify-center gap-3 bg-white p-1.5 rounded-2xl card-shadow border border-slate-100 w-full md:w-auto shrink-0">
                    <button id="btn-prev" onclick="changeDay(-1)" class="bg-slate-50 text-[#004488] border border-slate-200 px-4 py-2 rounded-xl hover:bg-blue-50 transition disabled:opacity-40 disabled:cursor-not-allowed font-bold text-sm flex items-center gap-1 active:scale-95">
                        <i class="fas fa-chevron-left"></i> Trước
                    </button>
                    <span id="current-day-indicator" class="text-base font-bold text-[#004488] min-w-[75px] text-center font-brand">1/10</span>
                    <button id="btn-next" onclick="changeDay(1)" class="bg-[#004488] text-white px-4 py-2 rounded-xl hover:bg-[#003366] transition disabled:opacity-40 disabled:cursor-not-allowed font-bold text-sm flex items-center gap-1 active:scale-95 shadow-md">
                        Tiếp <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>

            <!-- Single Card Container with fade effect & swipe support -->
            <div id="vocab-container" class="fade-transition fade-in min-h-[400px]">
                <!-- Javascript will inject the single active card here -->
            </div>

            <!-- Banner AI Luyện Từ Vựng SAT -->
            <div class="mt-6 animate-pulse-soft">
                <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-3xl p-1 shadow-lg border border-blue-100 relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-white rounded-full opacity-40 blur-2xl transform translate-x-1/2 -translate-y-1/2"></div>
                    
                    <div class="bg-white/60 backdrop-blur-sm rounded-[22px] p-5 flex flex-col sm:flex-row items-center justify-between gap-5 border border-white">
                        <div class="flex flex-col sm:flex-row items-center sm:items-start gap-4 text-center sm:text-left">
                            <div class="bg-gradient-to-br from-[#004488] to-indigo-600 w-12 h-12 rounded-2xl flex items-center justify-center text-[#FFD700] text-2xl shadow-lg shrink-0">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div>
                                <h4 class="font-brand font-bold text-[#004488] text-lg leading-tight mb-1">Trợ lý AI Luyện Từ Vựng</h4>
                                <p class="text-sm text-slate-600">Trải nghiệm phương pháp học chủ động (Active Recall) với bộ 300+ từ vựng Core SAT 2026.</p>
                            </div>
                        </div>
                        <a href="https://gemini.google.com/share/e3d6b641f07a" target="_blank" class="shrink-0 bg-gradient-to-b from-[#FFD700] to-[#f5c300] text-[#004488] font-bold py-2.5 px-5 rounded-2xl font-brand text-sm flex items-center gap-2 hover:scale-105 hover:shadow-xl transition-all w-full sm:w-auto justify-center border-b-4 border-[#c79e00]">
                            <span>Học thử ngay</span> <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Footer CTA -->
            <div id="register" class="mt-6 bg-white rounded-3xl p-6 card-shadow text-center border-t-4 border-[#004488]">
                <h3 class="font-brand font-bold text-xl text-[#004488] mb-1 uppercase">Năm 2026 Bứt Phá?</h3>
                <p class="text-sm text-slate-600 mb-4 italic">Nhận lộ trình cá nhân hóa trực tiếp từ Thầy Đức An.</p>
                
                <div class="flex flex-col sm:flex-row justify-center gap-3">
                    <a href="https://www.facebook.com/nghiemducan.10/" target="_blank" class="bg-[#004488] text-white font-bold py-2.5 px-6 rounded-2xl btn-3d font-brand w-full sm:w-auto hover:bg-[#003366] text-center flex justify-center items-center text-sm">
                        <i class="fab fa-facebook-messenger mr-2 text-lg"></i> Nhắn tin Thầy An
                    </a>
                    <a href="tel:0812358277" class="bg-blue-50 text-[#004488] font-bold py-2.5 px-6 rounded-2xl btn-3d font-brand w-full sm:w-auto hover:bg-blue-100 border border-blue-200 text-center flex justify-center items-center text-sm">
                        <i class="fas fa-phone-alt mr-2 text-lg"></i> Hotline: 0812358277
                    </a>
                </div>
            </div>
        </section>
    </main>

    <!-- Floating Action Buttons -->
    <div class="fixed bottom-6 right-6 z-50 flex flex-col gap-3">
        <a href="https://www.facebook.com/nghiemducan.10/" target="_blank" class="shake-element bg-blue-600 text-white w-12 h-12 rounded-full shadow-xl hover:bg-blue-700 transition flex justify-center items-center hover:scale-110">
            <i class="fab fa-facebook-messenger text-xl"></i>
        </a>
        <a href="tel:0812358277" class="bg-[#004488] text-white w-12 h-12 rounded-full shadow-xl hover:bg-[#003366] transition border-2 border-[#FFD700] flex justify-center items-center hover:scale-110">
            <i class="fas fa-phone text-lg"></i>
        </a>
    </div>

    <script>
        // Khởi tạo Confetti an toàn
        const confettiCanvas = document.getElementById('confetti-canvas');
        const customConfetti = confetti.create(confettiCanvas, {
            resize: true,
            useWorker: false // Tắt worker để tránh lỗi bảo mật/blob trong iframe
        });

        // Hàm phát âm TTS
        function speakWord(word) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel(); // Dừng câu đọc trước đó nếu đang đọc
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US'; // Chuẩn giọng Mỹ
                utterance.rate = 0.85;    // Đọc chậm hơn một chút để rõ âm
                window.speechSynthesis.speak(utterance);
            } else {
                alert("Trình duyệt của bạn không hỗ trợ tính năng đọc. Vui lòng thử trên Chrome hoặc Safari.");
            }
        }

        // Modal Logic
        function showModal() {
            const modal = document.getElementById('ny-modal');
            const content = document.getElementById('ny-modal-content');
            modal.classList.remove('opacity-0', 'pointer-events-none');
            content.classList.remove('scale-95');
            content.classList.add('scale-100');
            
            // Bắn pháo hoa chào mừng khi pop-up hiện ra
            setTimeout(() => {
                customConfetti({
                    particleCount: 120,
                    spread: 80,
                    origin: { y: 0.4 },
                    colors: ['#FFD700', '#004488', '#ffffff', '#e6c200']
                });
            }, 400);
        }

        function closeModal() {
            const modal = document.getElementById('ny-modal');
            const content = document.getElementById('ny-modal-content');
            modal.classList.add('opacity-0', 'pointer-events-none');
            content.classList.remove('scale-100');
            content.classList.add('scale-95');
        }

        const vocabList = [
            {
                date: "14/02",
                lunarDate: "27 Tết",
                theme: "Dọn dẹp năm cũ",
                word: "HARBINGER",
                pronunciation: "/ˈhɑːrbɪndʒər/",
                type: "Danh từ",
                textType: "Thơ (Poetry)",
                passage: `"The gray retreat of winter fades away,<br>As sunlight pierces through the heavy shroud.<br>A solitary peach branch, bold and gay,<br>Reveals a bloom, vivid and unbowed.<br>It stands a <b>harbinger</b> of days to come,<br>A whisper that the frozen earth is done."`,
                passageTranslate: "Sự lùi bước xám xịt của mùa đông dần phai mờ,<br>Khi ánh sáng mặt trời xuyên qua bức màn mây nặng nề.<br>Một cành đào đơn độc, rực rỡ và táo bạo,<br>Hé nở một bông hoa, sống động và kiên cường.<br>Nó đứng đó như một <b>harbinger (điềm báo)</b> của những ngày sắp tới,<br>Một lời thì thầm rằng mặt đất lạnh lẽo đã kết thúc.",
                passageExplain: "Đoạn thơ dùng hình ảnh cành đào nở rộ giữa mùa đông tàn lụi để làm <b>harbinger</b> (điềm báo/người báo hiệu) cho mùa xuân tươi đẹp sắp tới. Đáp án B (An indicator of something to come) phản ánh chính xác ngữ cảnh này.",
                meaning: "Người/vật báo hiệu, điềm báo.",
                newYearMeaning: "Trong khổ thơ, cành đào là tín hiệu (harbinger) cho thấy mùa đông đã qua. Học từ này để kì vọng về những tín hiệu tốt lành sắp tới.",
                question: 'As used in the text, what does the word "harbinger" most nearly mean?',
                options: [
                    "A destructive force",
                    "An indicator of something to come",
                    "A completely unexpected event",
                    "A lingering memory"
                ],
                correct: 1 // B
            },
            {
                date: "15/02",
                lunarDate: "28 Tết",
                theme: "Tinh tươm đón Tết",
                word: "PRISTINE",
                pronunciation: "/ˈprɪstiːn/",
                type: "Tính từ",
                textType: "Khoa học (Science - Ecology)",
                passage: `"Researchers trekking through the remote basin were struck by the water's clarity. Unlike downstream rivers choked with agricultural runoff, this headwater lake remained <b>pristine</b>, its chemical composition unchanged for centuries. This lack of contamination allows ecologists to study the region’s native biodiversity in its original state."`,
                passageTranslate: "Các nhà nghiên cứu đi qua lưu vực hẻo lánh đã rất ngạc nhiên trước sự trong vắt của dòng nước. Khác với các con sông hạ lưu bị ô nhiễm bởi nước thải nông nghiệp, hồ nước đầu nguồn này vẫn giữ được vẻ <b>pristine (nguyên sơ)</b>, thành phần hóa học không thay đổi trong nhiều thế kỷ. Sự vắng mặt của ô nhiễm cho phép các nhà sinh thái học nghiên cứu đa dạng sinh học trong trạng thái nguyên bản.",
                passageExplain: "Từ 'pristine' nhấn mạnh sự sạch sẽ, không bị ô nhiễm (lack of contamination) và trạng thái nguyên bản (original state). Do đó, đáp án B là sự mô tả chức năng chính xác nhất của từ này trong đoạn văn.",
                meaning: "Tinh khôi, nguyên sơ, sạch sẽ.",
                newYearMeaning: "Ngày 28 Tết dọn dẹp nhà cửa là để đưa không gian sống về trạng thái pristine. Chúc bạn một năm mới với tâm trí sáng trong.",
                question: 'Which choice best states the function of the word "pristine" in the overall text?',
                options: [
                    "It emphasizes the complex nature of the ecosystem.",
                    "It highlights the completely unspoiled and clean state of the environment.",
                    "It suggests that the ecosystem is fragile and dying.",
                    "It proves that scientists have altered the area."
                ],
                correct: 1 // B
            },
            {
                date: "16/02",
                lunarDate: "29 Tết - Giao thừa",
                theme: "Đúc kết năm qua",
                word: "CULMINATION",
                pronunciation: "/ˌkʌlmɪˈneɪʃn/",
                type: "Danh từ",
                textType: "Văn học (Literature)",
                passage: `"For months, the artisans had labored in secret, mixing powders and testing fuses. The festival had been filled with music, but everyone knew these were mere preludes. The grand midnight fireworks display was the <b>culmination</b> of their collective artistry, a final, thunderous symphony of light that left the crowd in awed silence."`,
                passageTranslate: "Trong nhiều tháng, các nghệ nhân đã làm việc trong bí mật, trộn thuốc súng và thử nghiệm ngòi nổ. Lễ hội ngập tràn âm nhạc, nhưng ai cũng biết đó chỉ là khúc dạo đầu. Màn pháo hoa hoành tráng lúc nửa đêm là <b>culmination (đỉnh điểm/kết quả cuối cùng)</b> của nghệ thuật tập thể, một bản giao hưởng ánh sáng gầm vang khiến đám đông chìm trong sự im lặng kính sợ.",
                passageExplain: "Màn pháo hoa không phải là sự kiện ngẫu nhiên mà là kết quả cuối cùng, đỉnh cao của cả một quá trình chuẩn bị dài. Đáp án C (The highest or climactic point) là nghĩa gần và đúng nhất của Culmination.",
                meaning: "Đỉnh điểm, kết quả cuối cùng.",
                newYearMeaning: "Giao thừa là sự đúc kết (culmination) của 365 ngày nỗ lực. Chúc việc ôn thi SAT của bạn sẽ đi đến một culmination rực rỡ!",
                question: 'As used in the text, what does the word "culmination" most nearly mean?',
                options: [
                    "The initial starting point",
                    "A minor interruption",
                    "The highest or climactic point",
                    "A sudden cancellation"
                ],
                correct: 2 // C
            },
            {
                date: "17/02",
                lunarDate: "Mùng 1 Tết",
                theme: "Khởi đầu may mắn",
                word: "AUSPICIOUS",
                pronunciation: "/ɔːˈspɪʃəs/",
                type: "Tính từ",
                textType: "Thơ (Poetry)",
                passage: `"The clouds disperse, the golden sun ascends,<br>And shadows flee from corners of the room.<br>A gentle breeze its favor extends,<br>Dispelling all traces of winter's gloom.<br>Beneath this <b>auspicious</b> sky we start,<br>With open eyes and a hopeful heart."`,
                passageTranslate: "Những đám mây tan đi, mặt trời vàng lên cao,<br>Và những cái bóng chạy trốn khỏi các góc phòng.<br>Một cơn gió nhẹ lan tỏa sự êm ái,<br>Xua tan mọi dấu vết u ám của mùa đông.<br>Dưới bầu trời <b>auspicious (tốt lành)</b> này, chúng ta bắt đầu,<br>Với đôi mắt mở to và trái tim đầy hy vọng.",
                passageExplain: "Khung cảnh mùa đông u ám tan đi để nhường chỗ cho sự khởi đầu tươi sáng, cho thấy 'auspicious' mang ý nghĩa thuận lợi, hứa hẹn điềm lành. Từ Favorable (Đáp án A) là từ thay thế hoàn hảo nhất.",
                meaning: "Có điềm lành, hứa hẹn tốt đẹp.",
                newYearMeaning: "Bài thơ mô tả cảnh mây tan, nắng lên - một khởi đầu auspicious. Viết từ này xuống để 'khai bút' cầu mong một năm thuận buồm xuôi gió.",
                question: 'Which word would best replace "auspicious" in the poem without changing its overall meaning?',
                options: [
                    "Favorable",
                    "Gloomy",
                    "Unpredictable",
                    "Ordinary"
                ],
                correct: 0 // A
            },
            {
                date: "18/02",
                lunarDate: "Mùng 2 Tết",
                theme: "Sum vầy ấm áp",
                word: "CONVIVIAL",
                pronunciation: "/kənˈvɪviəl/",
                type: "Tính từ",
                textType: "Văn học (Literature)",
                passage: `"The contrast between the silent, snowy street and the interior of the house was jarring. Inside, the air was thick with the aroma of roasted spices. Strangers became friends over shared plates, and the room vibrated with laughter; it was a strictly <b>convivial</b> gathering where social status was forgotten, and only good company mattered."`,
                passageTranslate: "Sự tương phản giữa con phố tĩnh lặng, đầy tuyết và bên trong ngôi nhà thật rõ rệt. Bên trong, không khí ngập tràn mùi hương gia vị nướng. Những người xa lạ trở thành bạn bè bên những đĩa thức ăn chung, và căn phòng rung lên vì tiếng cười; đó là một buổi tụ tập thực sự <b>convivial (hòa đồng/vui vẻ)</b>, nơi địa vị xã hội bị lãng quên.",
                passageExplain: "Khung cảnh bên trong tràn ngập tiếng cười và sự kết giao (strangers became friends) mô tả một không khí hội hè, thân thiện và ấm cúng. Đáp án B (Festive and sociable) phản ánh hoàn toàn đúng tính chất 'convivial'.",
                meaning: "Vui vẻ, thân thiện (thường dùng cho tiệc tùng).",
                newYearMeaning: "Ngày Mùng 2 về ngoại chúc Tết chính là khung cảnh convivial này. Chúc bạn có những giây phút ấm áp bên gia đình.",
                question: 'As used in the text, "convivial" most nearly means:',
                options: [
                    "Tense and formal",
                    "Festive and sociable",
                    "Quiet and reflective",
                    "Chaotic and confusing"
                ],
                correct: 1 // B
            },
            {
                date: "19/02",
                lunarDate: "Mùng 3 Tết",
                theme: "Tết Thầy",
                word: "SAGACIOUS",
                pronunciation: "/səˈɡeɪʃəs/",
                type: "Tính từ",
                textType: "Văn học (Literature)",
                passage: `"Professor Thorne rarely consulted his notes during lectures. Instead, he paced the front of the hall, weaving historical facts into compelling narratives. His students admired him not merely for his vast memory, but for his <b>sagacious</b> ability to connect seemingly unrelated events, revealing the hidden patterns of history."`,
                passageTranslate: "Giáo sư Thorne hiếm khi xem ghi chú trong bài giảng. Thay vào đó, ông đi lại trước hội trường, dệt các sự kiện lịch sử thành những câu chuyện hấp dẫn. Sinh viên ngưỡng mộ ông không chỉ vì trí nhớ siêu phàm, mà vì khả năng <b>sagacious (khôn ngoan)</b> của ông trong việc kết nối các sự kiện có vẻ không liên quan, bộc lộ những quy luật lịch sử ẩn giấu.",
                passageExplain: "Việc tìm ra những quy luật sâu sắc (hidden patterns) giữa các sự kiện rời rạc thể hiện sự thông thái, khôn ngoan (wise) và khả năng thấu hiểu sâu sắc (deep understanding). Đáp án B là chính xác nhất.",
                meaning: "Khôn ngoan, sáng suốt, minh mẫn.",
                newYearMeaning: "Giáo sư được khen vì khả năng nhìn ra quy luật sâu sắc. Chúc bạn thêm một tuổi thêm phần sagacious để giải mã các bài SAT hóc búa.",
                question: 'Which choice best describes the professor as portrayed in the text?',
                options: [
                    "She is strict and relies solely on memorization.",
                    "She is wise and imparts deep understanding.",
                    "She is humorous but disorganized.",
                    "She is inexperienced but enthusiastic."
                ],
                correct: 1 // B
            },
            {
                date: "20/02",
                lunarDate: "Mùng 4 Tết",
                theme: "Đâm chồi nảy lộc",
                word: "BURGEON",
                pronunciation: "/ˈbɜːrdʒən/",
                type: "Động từ",
                textType: "Khoa học (Botany)",
                passage: `"In temperate climates, the onset of spring triggers a complex hormonal response. As soil temperatures rise and daylight hours increase, auxins stimulate rapid cell division. Consequently, dormant buds break open and foliage begins to <b>burgeon</b> across the landscape, transforming the gray canopy into a vibrant green."`,
                passageTranslate: "Ở vùng ôn đới, mùa xuân đến kích hoạt phản ứng hormone phức tạp. Khi nhiệt độ đất tăng và số giờ chiếu sáng kéo dài, hormone auxin kích thích phân chia tế bào. Hậu quả là, các chồi ngủ nứt ra và tán lá bắt đầu <b>burgeon (đâm chồi/phát triển mạnh)</b> khắp cảnh quan, biến vòm cây xám xịt thành màu xanh rực rỡ.",
                passageExplain: "Dấu hiệu 'chồi nứt ra' và 'biến thành màu xanh rực rỡ' cho thấy cây cối đang sinh sôi, nảy nở và phát triển nhanh chóng. Đáp án C (To flourish and grow rapidly) là từ đồng nghĩa trực tiếp.",
                meaning: "Phát triển nhanh chóng, đâm chồi.",
                newYearMeaning: "Mong rằng kiến thức và 'tài lộc' của bạn sẽ burgeon mạnh mẽ như cây cối mùa xuân.",
                question: 'As used in the text, what does the word "burgeon" most nearly mean?',
                options: [
                    "To wither and die",
                    "To remain hidden",
                    "To flourish and grow rapidly",
                    "To change color"
                ],
                correct: 2 // C
            },
            {
                date: "21/02",
                lunarDate: "Mùng 5 Tết",
                theme: "Sức sống mãnh liệt",
                word: "RESILIENT",
                pronunciation: "/rɪˈzɪliənt/",
                type: "Tính từ",
                textType: "Khoa học (Biology)",
                passage: `"Tardigrades, often called water bears, possess a unique survival mechanism known as cryptobiosis. When faced with desiccation, they curl into a tun state. This adaptation makes them incredibly <b>resilient</b>, allowing them to withstand extreme pressures, radiation, and temperatures that would be fatal to almost any other organism."`,
                passageTranslate: "Bọ gấu nước có cơ chế sinh tồn độc đáo gọi là ngủ đông khô. Khi đối mặt với sự mất nước, chúng cuộn tròn lại. Sự thích nghi này khiến chúng vô cùng <b>resilient (kiên cường)</b>, cho phép chúng chịu đựng được áp suất, bức xạ và nhiệt độ khắc nghiệt vốn có thể gây tử vong cho gần như bất kỳ sinh vật nào khác.",
                passageExplain: "Manh mối ngữ cảnh (context clue) chỉ ra định nghĩa của Resilient nằm ngay ở cụm từ 'withstand extreme pressures... and temperatures' (chịu đựng áp lực và nhiệt độ khắc nghiệt). Do đó chọn đáp án B.",
                meaning: "Kiên cường, mau phục hồi.",
                newYearMeaning: "Hành trình ôn thi SAT cần sự resilient như gấu nước: ngã ở đâu đứng dậy ở đó, không bao giờ bỏ cuộc.",
                question: 'Which choice provides the best context clue for the meaning of "resilient"?',
                options: [
                    "microscopic animals on Earth",
                    "withstand extreme pressures... and temperatures",
                    "known as one of the most",
                    "the vacuum of space"
                ],
                correct: 1 // B
            },
            {
                date: "22/02",
                lunarDate: "Mùng 6 Tết",
                theme: "Khai sáng tâm trí",
                word: "ILLUMINATE",
                pronunciation: "/ɪˈluːmɪneɪt/",
                type: "Động từ",
                textType: "Thơ (Poetry)",
                passage: `"The ancient scroll was cryptic, dark, and deep,<br>Its secrets locked in symbols old and vast.<br>Until a thought, arising from sleep,<br>Did <b>illuminate</b> the meaning at last.<br>Like a lantern raised within a cave,<br>It showed the path the ancient writer gave."`,
                passageTranslate: "Cuộn giấy cổ bí ẩn, tăm tối và sâu thẳm,<br>Bí mật của nó bị khóa trong các biểu tượng cổ xưa.<br>Cho đến khi một ý nghĩ, nảy sinh từ giấc ngủ,<br>Đã <b>illuminate (làm sáng tỏ)</b> ý nghĩa cuối cùng.<br>Giống như một chiếc đèn lồng giơ lên trong hang,<br>Nó soi sáng con đường mà tác giả cổ đại đã đi.",
                passageExplain: "Bài thơ so sánh việc hiểu ra một ý tưởng phức tạp (mental clarity) với việc thắp lên một chiếc đèn lồng (physical light). Từ 'illuminate' (chiếu sáng) mang cả nghĩa đen và bóng. Đáp án A là sự phân tích toàn diện nhất.",
                meaning: "Làm sáng tỏ, chiếu sáng.",
                newYearMeaning: "Hiểu ra một ý tưởng khó cũng giống như thắp đèn trong hang tối. Chúc bạn luôn có những khoảnh khắc 'Aha!' (illuminate) khi gặp bài tập khó.",
                question: 'In the context of the poem, "illuminate" is used to represent both:',
                options: [
                    "physical light and mental clarity.",
                    "heat and emotional warmth.",
                    "darkness and hidden secrets.",
                    "festive celebration and deep sleep."
                ],
                correct: 0 // A
            },
            {
                date: "23/02",
                lunarDate: "Mùng 7 Tết",
                theme: "Bứt phá thành công",
                word: "CATALYST",
                pronunciation: "/ˈkætəlɪst/",
                type: "Danh từ",
                textType: "Khoa học (Chemistry)",
                passage: `"In industrial ammonia production, speed and efficiency are paramount. The reaction between nitrogen and hydrogen is naturally slow due to nitrogen bonds. To overcome this, iron is introduced as a <b>catalyst</b>. By providing an alternative reaction pathway, the iron accelerates production without being consumed."`,
                passageTranslate: "Trong sản xuất amoniac công nghiệp, tốc độ và hiệu quả là tối quan trọng. Phản ứng giữa nitơ và hydro diễn ra chậm tự nhiên. Để khắc phục, sắt được đưa vào làm <b>catalyst (chất xúc tác)</b>. Bằng cách cung cấp một con đường phản ứng thay thế, sắt đẩy nhanh quá trình sản xuất mà không bị tiêu hao.",
                passageExplain: "Đoạn văn định nghĩa rất chính xác vai trò của Catalyst (sắt): đẩy nhanh tốc độ phản ứng (accelerates production) mà không tự bị tiêu hao (without being consumed). Đáp án B mô tả đúng điều này.",
                meaning: "Chất xúc tác.",
                newYearMeaning: "Mong kỳ nghỉ Tết vừa qua là catalyst giúp bạn bứt phá điểm số SAT trong năm mới!",
                question: 'As used in the text, what does the word "catalyst" most nearly mean?',
                options: [
                    "An obstacle that prevents change",
                    "An agent that speeds up a reaction without being consumed",
                    "A byproduct of a chemical process",
                    "A protective barrier"
                ],
                correct: 1 // B
            }
        ];

        let currentIndex = 0;
        const container = document.getElementById('vocab-container');
        
        // Variables for swipe gesture
        let touchstartX = 0;
        let touchstartY = 0;
        let touchendX = 0;
        let touchendY = 0;

        function initFlashcards() {
            // Lấy ngày hiện tại
            const today = new Date();
            const dd = String(today.getDate()).padStart(2, '0');
            const mm = String(today.getMonth() + 1).padStart(2, '0');
            const dateStr = dd + '/' + mm;

            // Tìm index dựa trên ngày
            const foundIndex = vocabList.findIndex(item => item.date === dateStr);
            if (foundIndex !== -1) {
                currentIndex = foundIndex;
            } else {
                // Nếu không nằm trong chuỗi ngày (ví dụ mở trước ngày 14/02), mặc định là ngày 1
                currentIndex = 0;
            }
            
            renderCard(currentIndex);
            
            // Thiết lập sự kiện vuốt (Swipe)
            setupSwipe();
        }
        
        function setupSwipe() {
            container.addEventListener('touchstart', e => {
                touchstartX = e.changedTouches[0].screenX;
                touchstartY = e.changedTouches[0].screenY;
            }, {passive: true});

            container.addEventListener('touchend', e => {
                touchendX = e.changedTouches[0].screenX;
                touchendY = e.changedTouches[0].screenY;
                handleSwipeGesture();
            }, {passive: true});
        }
        
        function handleSwipeGesture() {
            const swipeThresholdX = 50; // Quãng đường vuốt ngang tối thiểu
            const swipeThresholdY = 60; // Ngưỡng dọc để tránh nhận diện nhầm khi người dùng cuộn trang lên/xuống
            
            // Nếu người dùng cuộn dọc quá nhiều, sẽ bỏ qua nhận diện vuốt ngang
            if (Math.abs(touchendY - touchstartY) <= swipeThresholdY) {
                if (touchendX < touchstartX - swipeThresholdX) {
                    // Vuốt sang trái -> Sang thẻ tiếp theo
                    if(currentIndex < vocabList.length - 1) {
                        changeDay(1);
                    }
                }
                if (touchendX > touchstartX + swipeThresholdX) {
                    // Vuốt sang phải -> Quay lại thẻ trước
                    if(currentIndex > 0) {
                        changeDay(-1);
                    }
                }
            }
        }

        function renderCard(index) {
            const item = vocabList[index];
            
            // Cập nhật trạng thái nút
            document.getElementById('current-day-indicator').innerText = `${index + 1}/10`;
            document.getElementById('btn-prev').disabled = (index === 0);
            document.getElementById('btn-next').disabled = (index === vocabList.length - 1);

            // Tạo các options HTML (Thu gọn padding và text)
            let optionsHtml = '';
            item.options.forEach((opt, optIndex) => {
                optionsHtml += `
                    <button onclick="checkAnswer(this, ${optIndex === item.correct})" 
                        class="w-full text-left px-4 py-2.5 rounded-xl border-2 border-slate-100 hover:border-blue-200 hover:bg-blue-50 transition-all mb-2 font-medium text-slate-700 flex justify-between items-center group/btn text-sm shadow-sm">
                        <span class="flex-1">${["A", "B", "C", "D"][optIndex]}) ${opt}</span>
                        <span class="opacity-0 group-hover/btn:opacity-100 transition-opacity text-[#004488]"><i class="fas fa-check-circle"></i></span>
                    </button>
                `;
            });

            // HTML của Card (Giảm khoảng cách mb, p, py)
            const cardHtml = `
                <div class="bg-white rounded-3xl p-4 md:p-6 card-shadow border border-slate-100 relative overflow-hidden group">
                    <!-- Decorative Circle -->
                    <div class="absolute -right-8 -top-8 w-32 h-32 bg-blue-50/50 rounded-full z-0"></div>

                    <!-- Header: Date & Theme -->
                    <div class="relative z-10 flex flex-wrap justify-between items-start mb-4 border-b border-slate-100 pb-3">
                        <div>
                            <span class="inline-block bg-[#004488] text-white text-[11px] font-bold px-3 py-1 rounded-lg mb-1 font-brand uppercase tracking-wider shadow-sm">Ngày ${index + 1}: ${item.date}</span>
                            <span class="ml-2 text-[#d4b100] font-bold text-xs uppercase"><i class="fas fa-calendar-alt mr-1"></i> ${item.lunarDate}</span>
                            <h4 class="text-slate-500 italic text-sm mt-1 text-[#004488]/80 font-medium">${item.theme}</h4>
                        </div>
                    </div>

                    <!-- Main Word Display -->
                    <div class="relative z-10 text-center py-4 bg-slate-50/50 rounded-2xl mb-4 border border-slate-50">
                        <h2 class="font-brand font-extrabold text-4xl md:text-5xl text-[#004488] mb-1 tracking-wide drop-shadow-sm">${item.word}</h2>
                        <div class="flex items-center justify-center gap-3 text-slate-500 font-serif italic text-base">
                            <span>${item.pronunciation}</span>
                            <button onclick="speakWord('${item.word}')" class="text-[#004488] hover:text-[#d4b100] transition-colors hover:scale-110 active:scale-95" title="Nghe phát âm chuẩn Mỹ">
                                <i class="fas fa-volume-up text-lg"></i>
                            </button>
                            <span class="w-1 h-1 bg-slate-300 rounded-full"></span>
                            <span class="font-bold bg-white text-[#004488] px-2 py-0.5 rounded text-xs not-italic border border-slate-200 shadow-sm">${item.type}</span>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="relative z-10 grid grid-cols-2 gap-3 mb-4">
                        <button onclick="toggleSection('meaning-box')" class="bg-blue-50 text-[#004488] font-bold py-2 rounded-xl hover:bg-blue-100 transition-colors text-sm border border-blue-100 flex justify-center items-center shadow-sm active:scale-95">
                            <i class="fas fa-lightbulb mr-2 text-[#FFD700]"></i> Nghĩa & Lời Chúc
                        </button>
                        <button onclick="toggleSection('text-box')" class="bg-slate-50 text-slate-700 font-bold py-2 rounded-xl hover:bg-slate-100 transition-colors text-sm border border-slate-200 flex justify-center items-center shadow-sm active:scale-95">
                            <i class="fas fa-book-reader mr-2 text-[#004488]"></i> Đọc Đoạn Văn
                        </button>
                    </div>

                    <!-- Hidden Section: Meaning -->
                    <div id="meaning-box" class="hidden mb-4 bg-yellow-50/80 p-4 rounded-2xl border border-yellow-200 relative shadow-inner">
                        <div class="absolute top-4 right-4 text-yellow-400 opacity-20"><i class="fas fa-star text-3xl"></i></div>
                        <p class="font-bold text-[#004488] mb-1 text-base flex items-center gap-2"><i class="fas fa-spell-check text-[#d4b100]"></i> Nghĩa của từ:</p>
                        <p class="mb-3 text-slate-800 text-base border-b border-yellow-200/50 pb-3">${item.meaning}</p>
                        <p class="font-bold text-[#d4b100] mb-1 flex items-center gap-2"><i class="fas fa-gift text-sm"></i> Thông điệp năm mới:</p>
                        <p class="italic text-slate-700 text-sm leading-relaxed bg-white/50 p-2 rounded-lg border border-yellow-100/50">"${item.newYearMeaning}"</p>
                    </div>

                    <!-- Hidden Section: Passage & Quiz -->
                    <div id="text-box" class="hidden">
                        <!-- Passage Flip Card Container -->
                        <div class="relative w-full mb-4 perspective-1000">
                            <!-- MẶT TRƯỚC: Tiếng Anh -->
                            <div id="passage-front" class="bg-slate-50 p-4 md:p-5 rounded-2xl border border-slate-200 relative shadow-sm">
                                <div class="absolute top-0 right-0 bg-[#004488] text-white text-[9px] font-bold px-2 py-1 rounded-bl-xl rounded-tr-2xl uppercase tracking-wider">
                                    ${item.textType}
                                </div>
                                <p class="passage-text text-slate-800 text-justify mb-3 mt-1">
                                    ${item.passage}
                                </p>
                                <button onclick="flipPassage()" class="w-full text-center text-xs font-bold text-[#004488] bg-blue-100/50 py-2 rounded-xl hover:bg-blue-100 transition-colors border border-blue-200/50 active:scale-95">
                                    <i class="fas fa-sync-alt mr-1"></i> Lật xem Dịch & Giải thích chi tiết
                                </button>
                            </div>
                            
                            <!-- MẶT SAU: Dịch & Giải thích -->
                            <div id="passage-back" class="hidden bg-[#004488]/5 p-4 md:p-5 rounded-2xl border border-[#004488]/20 relative shadow-sm">
                                <div class="absolute top-0 right-0 bg-[#FFD700] text-[#004488] text-[9px] font-bold px-2 py-1 rounded-bl-xl rounded-tr-2xl uppercase tracking-wider">
                                    Giải nghĩa
                                </div>
                                <div class="mt-1">
                                    <p class="text-sm text-slate-700 mb-3 pb-3 border-b border-blue-200/50 leading-relaxed text-justify">
                                        <b class="flex items-center gap-1 mb-1"><i class="fas fa-language text-[#004488]"></i> Bản dịch:</b> ${item.passageTranslate}
                                    </p>
                                    <p class="text-sm text-[#004488] font-medium leading-relaxed text-justify">
                                        <b class="flex items-center gap-1 mb-1"><i class="fas fa-search"></i> Phân tích logic:</b> ${item.passageExplain}
                                    </p>
                                </div>
                                <button onclick="flipPassage()" class="w-full text-center text-xs font-bold text-white bg-[#004488] py-2 rounded-xl hover:bg-[#003366] transition-colors mt-4 shadow-md active:scale-95">
                                    <i class="fas fa-undo mr-1"></i> Trở về văn bản tiếng Anh
                                </button>
                            </div>
                        </div>

                        <!-- Quiz -->
                        <div class="mt-4 bg-white p-4 md:p-5 rounded-2xl border border-slate-100 shadow-sm">
                            <p class="font-brand text-sm font-bold text-[#004488] mb-2 flex items-start gap-2">
                                <i class="fas fa-question-circle mt-0.5 text-[#FFD700] text-base"></i> 
                                <span>${item.question}</span>
                            </p>
                            <div class="space-y-2">
                                ${optionsHtml}
                            </div>
                            <div id="quiz-result" class="hidden mt-3 text-center font-bold p-2 rounded-xl text-sm transition-all"></div>
                        </div>
                    </div>
                </div>
            `;

            // Áp dụng hiệu ứng fade-out/fade-in
            container.classList.remove('fade-in');
            container.classList.add('fade-out');
            
            setTimeout(() => {
                container.innerHTML = cardHtml;
                container.classList.remove('fade-out');
                container.classList.add('fade-in');
            }, 250);
        }

        function changeDay(step) {
            const newIndex = currentIndex + step;
            if (newIndex >= 0 && newIndex < vocabList.length) {
                currentIndex = newIndex;
                renderCard(currentIndex);
            }
        }

        function toggleSection(id) {
            const el = document.getElementById(id);
            if (el.classList.contains('hidden')) {
                el.classList.remove('hidden');
                el.classList.add('animate-fade-in');
            } else {
                el.classList.add('hidden');
                el.classList.remove('animate-fade-in');
            }
        }

        function flipPassage() {
            const front = document.getElementById('passage-front');
            const back = document.getElementById('passage-back');
            
            if (front.classList.contains('hidden')) {
                back.classList.add('hidden');
                back.classList.remove('animate-flip-in');
                
                front.classList.remove('hidden');
                front.classList.add('animate-flip-in');
            } else {
                front.classList.add('hidden');
                front.classList.remove('animate-flip-in');
                
                back.classList.remove('hidden');
                back.classList.add('animate-flip-in');
            }
        }

        function checkAnswer(btn, isCorrect) {
            const resultDiv = document.getElementById('quiz-result');
            const btnContainer = btn.parentElement;
            const allBtns = btnContainer.querySelectorAll('button');
            
            if (isCorrect) {
                // Nếu ĐÚNG: Khóa tất cả nút, làm mờ nút sai và hiện hiệu ứng
                allBtns.forEach(b => {
                    b.disabled = true;
                    b.classList.add('cursor-not-allowed');
                    b.classList.remove('hover:border-blue-200', 'hover:bg-blue-50');
                    if(b !== btn) b.classList.add('opacity-40');
                });
                
                btn.classList.remove('opacity-40', 'wrong-answer', 'opacity-50');
                btn.classList.add('correct-answer', 'ring-2', 'ring-green-400', 'ring-offset-2');
                resultDiv.innerHTML = "<i class='fas fa-check-circle mr-1 text-lg'></i> Xuất sắc! Bạn đã nắm bắt đúng logic SAT!";
                resultDiv.className = "mt-3 text-center font-bold p-2.5 rounded-xl text-sm bg-green-50 border border-green-200 text-green-700 animate-bounce shadow-sm";
                
                // Kích hoạt hiệu ứng pháo hoa (Confetti)
                customConfetti({
                    particleCount: 150,
                    spread: 80,
                    origin: { y: 0.6 },
                    colors: ['#FFD700', '#004488', '#ffffff', '#22c55e'],
                    zIndex: 90
                });
                
            } else {
                // Nếu SAI: Chỉ khóa nút hiện tại, cho phép chọn lại các nút khác
                btn.disabled = true;
                btn.classList.add('cursor-not-allowed', 'opacity-50', 'wrong-answer');
                btn.classList.remove('hover:border-blue-200', 'hover:bg-blue-50');
                
                resultDiv.innerHTML = "<i class='fas fa-times-circle mr-1 text-lg'></i> Chưa đúng. Hãy thử lại hoặc lật phần <b>Giải nghĩa</b> nhé!";
                resultDiv.className = "mt-3 text-center font-bold p-2.5 rounded-xl text-sm bg-red-50 border border-red-200 text-red-700 shadow-sm";
            }
            resultDiv.classList.remove('hidden');
        }

        // Chạy hàm khởi tạo khi tải trang
        window.addEventListener('DOMContentLoaded', () => {
            initFlashcards();
            // Hiện Modal Chúc Tết sau 0.5s để tạo sự bất ngờ
            setTimeout(showModal, 500);
        });
    </script>
</body>
</html>
